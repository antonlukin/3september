!function(){var t=null,n=Date.now(),o=document.getElementById("calendar"),r=document.getElementById("sound"),a=!1,c=0;function d(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function u(e){return 9<e&&e<20?d(e)+" раз":e%10<2||4<e%10?d(e)+" раз":d(e)+" раза"}function e(){(t=new WebSocket("wss://remailer.ru:8000")).onmessage=function(e){var t=document.querySelector(".counter--more");t.querySelector("strong").innerHTML=u(e.data),t.classList.remove("counter--hidden")},t.onclose=function(){!function(){if(!t||t.readyState==WebSocket.CLOSED)e()}()},t.onerror=function(e){console.error("WebSocket error observed: "+e)}}function i(){localStorage.setItem("count",++c);var e=document.querySelector(".counter--title");e.querySelector("strong").innerHTML=u(c),e.classList.remove("counter--hidden");var t=o.querySelector(".calendar__page:last-child");t.classList.add("calendar__page--animate"),t.addEventListener("animationend",function e(){t.classList.remove("calendar__page--animate"),t.removeEventListener("animationend",e)})}r.addEventListener("click",function(e){return e.preventDefault(),document.getElementById("audio").paused?(a=!1,document.getElementById("audio").play(),r.classList.remove("sound--stop")):(a=!0,document.getElementById("audio").pause(),r.classList.add("sound--stop"))}),o.addEventListener("click",function(e){if(e.preventDefault(),1500<Date.now()-n)return n=Date.now(),t&&t.readyState==WebSocket.OPEN&&t.send("update"),!a&&document.getElementById("audio").paused&&r.click(),i()}),setInterval(function(){t&&t.readyState==WebSocket.OPEN&&t.send("receive")},5e3),localStorage.getItem("count")&&(c=parseInt(localStorage.getItem("count"))),document.addEventListener("DOMContentLoaded",function(){return i()}),e()}();
!function(){var e=document.querySelectorAll(".share");if(null===e)return;for(var t=0;t<e.length;t++)e[t].addEventListener("click",function(e){return e.preventDefault(),t=this.href,h={width:600,height:400,id:this.dataset.label},r=Math.round(screen.width/2-h.width/2),i=0,screen.height>h.height&&(i=Math.round(screen.height/3-h.height/2)),window.open(t,h.id,"left="+r+",top="+i+",width="+h.width+",height="+h.height+",personalbar=0,toolbar=0,scrollbars=1,resizable=1");var t,h,r,i})}();